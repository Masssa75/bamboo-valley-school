[build]
  command = "npm run build"
  publish = "out"
  functions = "netlify/functions"

[build.environment]
  NODE_VERSION = "20"

[functions]
  node_bundler = "esbuild"

# Branch deploy settings - enables staging workflow
# main branch = production (bamboovalleyphuket.com)
# staging branch = preview (staging--bamboo-valley-school.netlify.app)
# feature branches = individual preview URLs
[context.production]
  command = "npm run build"

[context.staging]
  command = "npm run build"

[context.branch-deploy]
  command = "npm run build"

[context.deploy-preview]
  command = "npm run build"

# Redirect root to default locale (English)
[[redirects]]
  from = "/"
  to = "/en/"
  status = 302
  force = false

# Redirects for SEO preservation when migrating from Wix
[[redirects]]
  from = "/copy-of-summer-camp-2024-7-12-years"
  to = "https://phuketcamp.com"
  status = 301
  force = true
